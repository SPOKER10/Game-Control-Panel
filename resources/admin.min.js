$(document).ready(function(){
	$('._app').change(function() {
		$.ajax({
			url: _PAGE_URL + "admin/set/a",
			type: "POST",
			data: {id: $(this).attr('id'),value: $(this).val(), type: $(this).data('type')},
			success: () => { 	$.gritter.add({
                title: 'Applications status',
                text: 'Applications status has been changed.',
                class_name: "gritter-success" + (!$("#gritter-light").get(0) ? " gritter-light" : "")
            }); }
		})
	});

	$("._add").click(function() {
		var c = $(this).attr('id');
		var a = parseInt($('._'+c+'q').last().attr('id')) + 1;
		var b = '<div class="form-group _'+c+'q'+a+'"> \
				<label class="col-md-2 control-label">Question</label> \
							<div class="col-md-8"> \
								<input type="text" class="form-control _'+c+'q" placeholder="Question" id="'+a+'" name="a'+a+'"></input> \
							</div> \
							<div class="col-md-2"> \
								<a class="btn btn-danger _remove" id="'+a+'" id2="'+c+'"><i class="fa fa-remove"></i></a> \
							</div> \
						</div> \
			';
				
		$('._'+c+'q'+(a-1)).after(b);
	});
	$("body").on('click','._remove',function() {
		$('._save').prop("disabled", true);
		$('._add').addClass("disabled");
		$('._'+$(this).attr('id2')+'q'+$(this).attr('id')).hide('slow', function(){ $(this).remove(); $('._save').prop("disabled", false); $('._add').removeClass("disabled"); });
	});
	$(".form-horizontal").submit(function(e){
		e.preventDefault();
		$.ajax({
			url: _PAGE_URL + "admin/set/q",
			type: "POST",
			data: {id: $(this).data('id'),data: $(this).serialize(),type: $(this).data('type')},
			success: () => { $.gritter.add({
                title: 'Manage questions',
                text: 'Questions have been saved.',
                class_name: "gritter-success" + (!$("#gritter-light").get(0) ? " gritter-light" : "")
            }); }
		})
		return false;
	});
	
});